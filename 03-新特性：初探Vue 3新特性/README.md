# 03-新特性：初探 Vue 3 新特性

## vue2 问题

- 源码使用`Flow.js`实现类型检查
  - `Flow.js`已停止维护，社区转向`TS`
- 社区二次开发较难
  - `vue2`默认运行环境为浏览器环境，未针对跨平台做提前设计
    - `weex`直接在`vue2`源码中维护
    - `mpvue`则是拷贝了一份源码独自维护，后续`vue`更新新特性无法享受
- 响应式实现存在局限
  - 非真正的代理实现，基于`Object.defineProperty`拦截
    - 无法对象监听属性的增/删，需借助`$set`和`$delete`
    - 特殊数据结构无法监听，如`set`、`map`
    - 无法监测数组`length`变化
    - 无法监测数组通过索引设置值的变化
- `OptionApi`存在一些问题
  - 在逻辑较多的组件中，不利于阅读（上下横跳）
  - 属性方法挂在`this`上，对`TS`类型推导不友好
  - 通过`mixins`复用存在命名冲突、上下文不清晰等问题

## vue3 新特性

- 引入[RFC](https://github.com/vuejs/rfcs)合作共建机制
- 核心模块充分解耦，更小体积，更好的复用性
- 带来新工程化工具`vite`，开发更顺畅丝滑
- 使用`TS`重构，类型更友好，更好维护
- 充分考虑跨平台，自定义渲染器更方便
- 引入`CompositionApi`，逻辑复用更加方便
- 响应式系统重构，覆盖更多响应式场景
- 内置`Fragment、Teleport 和 Suspense`组件
